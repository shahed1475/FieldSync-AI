(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{78087:function(e,t,s){Promise.resolve().then(s.bind(s,47717))},47717:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var i=s(27573),a=s(31988),r=s(30950),n=s(29147),l=s(56696),o=s(8725),d=s(7653),c=s(12439),u=s(58248),x=s(5025);function h(e){let{title:t,value:s,change:a,changeType:h="neutral",icon:m,subtitle:p,className:v}=e,f=(0,l.E)();(0,d.useEffect)(()=>{f.start({scale:[1,1.02,1],transition:{duration:.5,ease:"easeInOut"}})},[s,f]);let j="positive"===h?c.Z:"negative"===h?u.Z:x.Z;return(0,i.jsxs)(r.E.div,{className:(0,n.cn)("otrix-card group relative overflow-hidden",v),variants:o.fl,initial:"hidden",animate:"visible",whileHover:"hover",children:[(0,i.jsx)(r.E.div,{className:"absolute inset-0 bg-gradient-to-br from-[#6E2BFF]/10 via-transparent to-[#00A6FF]/10 opacity-0 group-hover:opacity-100",transition:{duration:.5}}),(0,i.jsxs)("div",{className:"relative z-10 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-400",children:t}),m&&(0,i.jsx)(r.E.div,{whileHover:{scale:1.2,rotate:10},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:(0,i.jsx)(m,{className:"h-5 w-5 text-[#6E2BFF] opacity-60"})})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-baseline gap-3",children:[(0,i.jsx)(r.E.p,{className:"text-3xl font-bold text-white",animate:f,children:s}),a&&(0,i.jsxs)(r.E.div,{className:(0,n.cn)("flex items-center gap-1 rounded-full px-2 py-1 text-xs font-semibold","positive"===h&&"bg-green-500/20 text-green-400 border border-green-500/30","negative"===h&&"bg-red-500/20 text-red-400 border border-red-500/30","neutral"===h&&"bg-gray-500/20 text-gray-400 border border-gray-500/30"),initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2,duration:.3},children:[(0,i.jsx)(j,{className:"h-3 w-3"}),(0,i.jsx)("span",{children:a})]})]}),p&&(0,i.jsx)(r.E.p,{className:"mt-2 text-sm text-gray-500",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.3},children:p})]}),(0,i.jsx)(r.E.div,{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-[#6E2BFF] via-[#00A6FF] to-[#E93AFF] opacity-0 group-hover:opacity-100",transition:{duration:.3}}),(0,i.jsx)(r.E.div,{className:"absolute -right-4 -top-4 h-24 w-24 rounded-full bg-[#6E2BFF]/20 blur-2xl opacity-0 group-hover:opacity-100",transition:{duration:.5}})]})}var m=s(57790),p=s(87761),v=s(35486),f=s(50896),j=s(48266),g=s(57895),y=s(2657),b=s(57873);async function w(){let e=await fetch("/api/admin/analytics/revenue?months=12",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch revenue data");return e.json()}let N=e=>{let{active:t,payload:s,label:a}=e;return t&&s&&s.length?(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-[#0B0F19]/95 p-3 backdrop-blur-md shadow-[0_0_20px_rgba(0,166,255,0.3)]",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-white",children:a}),(0,i.jsxs)("p",{className:"text-sm text-[#00A6FF]",children:["Revenue: ",(0,i.jsxs)("span",{className:"font-bold",children:["$",s[0].value.toFixed(2)]})]})]}):null};function F(){let{data:e,isLoading:t}=(0,a.a)({queryKey:["revenue-chart"],queryFn:w});if(t)return(0,i.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,i.jsx)(r.E.div,{className:"h-12 w-12 rounded-full border-4 border-[#00A6FF]/30 border-t-[#00A6FF]",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})});let s=(null==e?void 0:e.map(e=>({month:(0,b.WU)(new Date(e.month),"MMM yyyy"),revenue:e.revenue})))||[];return(0,i.jsx)(r.E.div,{variants:o.pB,initial:"hidden",animate:"visible",style:{width:"100%",height:300},children:(0,i.jsx)(m.h,{width:"100%",height:300,children:(0,i.jsxs)(p.T,{data:s,children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"5%",stopColor:"#00A6FF",stopOpacity:.8}),(0,i.jsx)("stop",{offset:"95%",stopColor:"#E93AFF",stopOpacity:.1})]})}),(0,i.jsx)(v.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,i.jsx)(f.K,{dataKey:"month",stroke:"rgba(255,255,255,0.5)",style:{fontSize:12}}),(0,i.jsx)(j.B,{stroke:"rgba(255,255,255,0.5)",style:{fontSize:12},tickFormatter:e=>"$".concat(e)}),(0,i.jsx)(g.u,{content:(0,i.jsx)(N,{})}),(0,i.jsx)(y.u,{type:"monotone",dataKey:"revenue",stroke:"#00A6FF",strokeWidth:3,fill:"url(#revenueGradient)",fillOpacity:1,style:{filter:"drop-shadow(0 0 8px rgba(0, 166, 255, 0.5))"}})]})})})}async function E(){let e=await fetch("/api/admin/analytics/users?months=12",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch user growth data");return e.json()}let B=e=>{let{active:t,payload:s,label:a}=e;return t&&s&&s.length?(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-[#0B0F19]/95 p-3 backdrop-blur-md shadow-[0_0_20px_rgba(110,43,255,0.3)]",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-white",children:a}),(0,i.jsxs)("p",{className:"text-sm text-[#6E2BFF]",children:["Users: ",(0,i.jsx)("span",{className:"font-bold",children:s[0].value})]})]}):null};function k(){let{data:e,isLoading:t}=(0,a.a)({queryKey:["user-growth-chart"],queryFn:E});if(t)return(0,i.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,i.jsx)(r.E.div,{className:"h-12 w-12 rounded-full border-4 border-[#6E2BFF]/30 border-t-[#6E2BFF]",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})});let s=(null==e?void 0:e.map(e=>({month:(0,b.WU)(new Date(e.month),"MMM yyyy"),users:e.count})))||[];return(0,i.jsx)(r.E.div,{variants:o.pB,initial:"hidden",animate:"visible",style:{width:"100%",height:300},children:(0,i.jsx)(m.h,{width:"100%",height:300,children:(0,i.jsxs)(p.T,{data:s,children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"userGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"5%",stopColor:"#6E2BFF",stopOpacity:.8}),(0,i.jsx)("stop",{offset:"95%",stopColor:"#00A6FF",stopOpacity:.1})]})}),(0,i.jsx)(v.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,i.jsx)(f.K,{dataKey:"month",stroke:"rgba(255,255,255,0.5)",style:{fontSize:12}}),(0,i.jsx)(j.B,{stroke:"rgba(255,255,255,0.5)",style:{fontSize:12}}),(0,i.jsx)(g.u,{content:(0,i.jsx)(B,{})}),(0,i.jsx)(y.u,{type:"monotone",dataKey:"users",stroke:"#6E2BFF",strokeWidth:3,fill:"url(#userGradient)",fillOpacity:1,style:{filter:"drop-shadow(0 0 8px rgba(110, 43, 255, 0.5))"}})]})})})}var _=s(29958),C=s(36772),U=s(53847);let A={pending:"#F59E0B",in_progress:"#00A6FF",completed:"#10B981",failed:"#EF4444",canceled:"#6B7280"},G={pending:{start:"#F59E0B",end:"#F97316"},in_progress:{start:"#00A6FF",end:"#6E2BFF"},completed:{start:"#10B981",end:"#059669"},failed:{start:"#EF4444",end:"#DC2626"},canceled:{start:"#6B7280",end:"#4B5563"}},S=e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-[#0B0F19]/95 p-3 backdrop-blur-md shadow-[0_0_20px_rgba(110,43,255,0.3)]",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-white",children:s[0].payload.status}),(0,i.jsxs)("p",{className:"text-sm text-[#6E2BFF]",children:["Count: ",(0,i.jsx)("span",{className:"font-bold",children:s[0].value})]})]}):null};function O(e){let{data:t}=e,s=t.map(e=>({status:e.status.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),count:e._count.status,fill:A[e.status]||"#6b7280",gradient:G[e.status]||{start:"#6B7280",end:"#4B5563"},originalStatus:e.status}));return(0,i.jsx)(r.E.div,{variants:o.pB,initial:"hidden",animate:"visible",style:{width:"100%",height:300},children:(0,i.jsx)(m.h,{width:"100%",height:300,children:(0,i.jsxs)(_.v,{data:s,children:[(0,i.jsx)("defs",{children:s.map((e,t)=>(0,i.jsxs)("linearGradient",{id:"barGradient-".concat(e.originalStatus),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"5%",stopColor:e.gradient.start,stopOpacity:1}),(0,i.jsx)("stop",{offset:"95%",stopColor:e.gradient.end,stopOpacity:.8})]},"gradient-".concat(t)))}),(0,i.jsx)(v.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,i.jsx)(f.K,{dataKey:"status",stroke:"rgba(255,255,255,0.5)",style:{fontSize:12}}),(0,i.jsx)(j.B,{stroke:"rgba(255,255,255,0.5)",style:{fontSize:12}}),(0,i.jsx)(g.u,{content:(0,i.jsx)(S,{})}),(0,i.jsx)(C.$,{dataKey:"count",radius:[8,8,0,0],children:s.map((e,t)=>(0,i.jsx)(U.b,{fill:"url(#barGradient-".concat(e.originalStatus,")"),style:{filter:"drop-shadow(0 0 8px ".concat(e.fill,"40)")}},"cell-".concat(t)))})]})})})}var Z=s(83989),K=s(81980),D=s(32026),T=s(18177),M=s(97066);async function q(){let e=await fetch("/api/admin/analytics",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch analytics");return e.json()}function z(){var e,t,s,l,d,u,x,m,p,v,f;let{data:j,isLoading:g,error:y}=(0,a.a)({queryKey:["admin-analytics"],queryFn:q,refetchInterval:3e4});return g?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsx)("div",{className:"text-lg text-gray-600",children:"Loading dashboard..."})}):y?(0,i.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:(0,i.jsx)("p",{className:"text-red-800",children:"Failed to load analytics data"})}):(0,i.jsxs)(r.E.div,{className:"space-y-8",variants:o.Jm,initial:"hidden",animate:"visible",children:[(0,i.jsxs)(r.E.div,{variants:o.CU,className:"mb-6",children:[(0,i.jsx)("h1",{className:"otrix-title-gradient",children:"Dashboard"}),(0,i.jsx)("p",{className:"otrix-subtitle",children:"Overview of your OtriX platform performance"}),(0,i.jsx)("div",{className:"otrix-gradient h-[2px] w-24 rounded-full mt-4"})]}),(0,i.jsxs)(r.E.div,{variants:o.CU,className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,i.jsx)(h,{title:"Total Users",value:(0,n.uf)((null==j?void 0:null===(e=j.users)||void 0===e?void 0:e.total)||0),change:"+".concat((null==j?void 0:null===(t=j.users)||void 0===t?void 0:t.thisMonth)||0," this month"),changeType:"positive",icon:Z.Z}),(0,i.jsx)(h,{title:"Total Projects",value:(0,n.uf)((null==j?void 0:null===(s=j.projects)||void 0===s?void 0:s.total)||0),change:"".concat((null==j?void 0:null===(l=j.projects)||void 0===l?void 0:l.completionRate)||0,"% completed"),changeType:"neutral",icon:K.Z}),(0,i.jsx)(h,{title:"Active Subscriptions",value:(0,n.uf)((null==j?void 0:null===(d=j.subscriptions)||void 0===d?void 0:d.active)||0),icon:D.Z}),(0,i.jsx)(h,{title:"Total Revenue",value:(0,n.xG)((null==j?void 0:null===(u=j.revenue)||void 0===u?void 0:u.total)||0),change:"".concat((0,n.xG)((null==j?void 0:null===(x=j.revenue)||void 0===x?void 0:x.thisMonth)||0)," this month"),changeType:"positive",icon:T.Z})]}),(0,i.jsxs)(r.E.div,{variants:o.CU,className:"grid gap-6 lg:grid-cols-2",children:[(0,i.jsxs)("div",{className:"otrix-card-enhanced",children:[(0,i.jsxs)("h2",{className:"mb-6 text-lg font-semibold text-white flex items-center gap-2",children:[(0,i.jsx)(T.Z,{className:"h-5 w-5 text-[#00A6FF] otrix-icon-pulse"}),"Revenue Overview"]}),(0,i.jsx)(F,{})]}),(0,i.jsxs)("div",{className:"otrix-card-enhanced",children:[(0,i.jsxs)("h2",{className:"mb-6 text-lg font-semibold text-white flex items-center gap-2",children:[(0,i.jsx)(Z.Z,{className:"h-5 w-5 text-[#6E2BFF] otrix-icon-pulse"}),"User Growth"]}),(0,i.jsx)(k,{})]})]}),(0,i.jsxs)(r.E.div,{variants:o.CU,className:"otrix-card-enhanced",children:[(0,i.jsxs)("h2",{className:"mb-6 text-lg font-semibold text-white flex items-center gap-2",children:[(0,i.jsx)(K.Z,{className:"h-5 w-5 text-[#6E2BFF] otrix-icon-pulse"}),"Project Status Distribution"]}),(0,i.jsx)(O,{data:(null==j?void 0:null===(m=j.projects)||void 0===m?void 0:m.statusBreakdown)||[]})]}),(0,i.jsxs)(r.E.div,{variants:o.CU,className:"grid gap-6 lg:grid-cols-3",children:[(0,i.jsx)("div",{className:"otrix-card-enhanced group",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 group-hover:shadow-[0_0_20px_rgba(16,185,129,0.3)] transition-shadow otrix-scale-hover",children:(0,i.jsx)(c.Z,{className:"h-6 w-6 text-green-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm otrix-text-muted",children:"Growth Rate"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-white",children:[(null==j?void 0:null===(p=j.users)||void 0===p?void 0:p.growth)||0,"%"]})]})]})}),(0,i.jsx)("div",{className:"otrix-card-enhanced group",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500/20 to-cyan-500/20 group-hover:shadow-[0_0_20px_rgba(0,166,255,0.3)] transition-shadow otrix-scale-hover",children:(0,i.jsx)(M.Z,{className:"h-6 w-6 text-blue-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm otrix-text-muted",children:"Completed Projects"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-white",children:(0,n.uf)((null==j?void 0:null===(v=j.projects)||void 0===v?void 0:v.completed)||0)})]})]})}),(0,i.jsx)("div",{className:"otrix-card-enhanced group",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 group-hover:shadow-[0_0_20px_rgba(110,43,255,0.3)] transition-shadow otrix-scale-hover",children:(0,i.jsx)(T.Z,{className:"h-6 w-6 text-purple-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm otrix-text-muted",children:"Revenue This Month"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-white",children:(0,n.xG)((null==j?void 0:null===(f=j.revenue)||void 0===f?void 0:f.thisMonth)||0)})]})]})})]})]})}},8725:function(e,t,s){"use strict";s.d(t,{CU:function(){return o},Ji:function(){return r},Jm:function(){return l},RL:function(){return d},fl:function(){return n},pB:function(){return c}});let i=[.4,0,.2,1],a={duration:.5,ease:i},r={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,ease:i}}},n={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:30}}},l={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:a}},d={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:.05*e,...a}})},c={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.8,ease:i}}}},29147:function(e,t,s){"use strict";s.d(t,{cn:function(){return r},p6:function(){return l},uf:function(){return o},xG:function(){return n}});var i=s(10607),a=s(25579);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,i.W)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function o(e){return new Intl.NumberFormat("en-US").format(e)}}},function(e){e.O(0,[950,661,976,988,340,293,528,744],function(){return e(e.s=78087)}),_N_E=e.O()}]);